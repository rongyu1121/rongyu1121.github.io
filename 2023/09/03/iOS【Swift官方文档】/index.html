<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>iOS【Swift官方文档】 · 容与的成长之路</title><meta name="description" content="0 swift 初见
print() 打印
数据类型：Double、可选值(String?)、元组用()
转换类型：\(apples)、String(width)
三引号包含多行字符串，”””
[]方括号表示数组和字典，数组append()加元素12let emptyArray: [String] "><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">容与的成长之路</a></h3><div class="description"><p>唯江上之清风，与山间之明月，吾与子所共适也。</p></div></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a target="_blank" rel="noopener" href="https://www.caicai.me"> CaiCai </a><span>&</span><a target="_blank" rel="noopener" href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div><div class="avatar"><img src="/asset/avatar.JPG"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>iOS【Swift官方文档】</a></h3></div><div class="post-content"><h3 id="0-swift-初见"><a href="#0-swift-初见" class="headerlink" title="0 swift 初见"></a>0 swift 初见</h3><ul>
<li>print() 打印</li>
<li>数据类型：Double、可选值(String?)、元组用()</li>
<li>转换类型：\(apples)、String(width)</li>
<li>三引号包含多行字符串，”””</li>
<li>[]方括号表示数组和字典，数组append()加元素<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> emptyArray: [<span class="type">String</span>] <span class="operator">=</span> []</span><br><span class="line"><span class="keyword">let</span> emptyDictionary: [<span class="type">String</span>: <span class="type">Float</span>] <span class="operator">=</span> [:]</span><br></pre></td></tr></table></figure></li>
<li>条件语句、循环体的小括号可省略，语句体的大括号必须</li>
<li>if、switch、for-in、while、repeat-while，if 条件必须是布尔表达式，if let处理值缺失情况，?? 也可以处理，nickName ?? fullName</li>
<li>if let nickname {} 解包代码可以简短，与被解包值用相同名称</li>
<li>switch case 可匹配字符串，匹配到会退出，不用写break。多情况匹配 case “cucumber”, “watercress”:，条件匹配<br>case let x where x.hasSuffix(“pepper”):</li>
<li>for-in 遍历字典，可省略key用_替代。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">_</span>, numbers) <span class="keyword">in</span> interestingNumbers &#123;&#125;</span><br></pre></td></tr></table></figure></li>
<li>循环中用 ..&lt; 表示下标范围，不包含上界，…包含<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="number">4</span> &#123;&#125;</span><br></pre></td></tr></table></figure></li>
<li>函数参数标签，或用_表示不使用标签<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="keyword">_</span> <span class="params">person</span>: <span class="type">String</span>, <span class="params">on</span> <span class="params">day</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>元组可以用名称和下标取元素</li>
<li>函数嵌套，做返回值、参数</li>
<li>闭包，用in分开声明和函数体，简写可忽略参数、返回值。作为唯一参数可忽略小括号，用参数位置引用参数<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">numbers.map(&#123; number <span class="keyword">in</span> <span class="number">3</span> <span class="operator">*</span> number &#125;)</span><br><span class="line">numbers.sorted &#123; <span class="variable">$0</span> <span class="operator">&gt;</span> <span class="variable">$1</span> &#125;</span><br></pre></td></tr></table></figure></li>
<li>类，构造器 init，构造器中用self区别实例变量和参数，每个属性都需要赋值。deinit析构函数，override覆写父类方法。getter 和 setter 计算属性，setter 新值名字newValue，willSet、didSet 用来在值改变时做一些处理，不含构造器中值改变的情况。</li>
<li>可选值解包后操作，optionalSquare?.sideLength，为nil整个表达式都返回nil否则解包</li>
<li>枚举可包含方法，默认从0开始为原始值赋值，可显示赋值改变。rawValue访问原始值，原始值可以是字符串、浮点数。可以用原始值构建枚举实例，该值是可选型。不是一定要提供原始值。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> convertedRank <span class="operator">=</span> <span class="type">Rank</span>(rawValue: <span class="number">3</span>) &#123;&#125;</span><br></pre></td></tr></table></figure></li>
<li>枚举成员可以关联值，<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">ServerResponse</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> result(<span class="type">String</span>, <span class="type">String</span>)</span><br><span class="line">    <span class="keyword">case</span> failure(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>结构体和类相似，结构体穿值，类传引用</li>
<li>并发性：async、await，async let 异步并行运行，Task {}同步中调异步函数，不等待返回</li>
<li>类、枚举、结构体都可遵从协议，结构体中 mutating 关键字表明方法会修改结构体，而类中不需标明，类可以修改其属性</li>
<li>用扩展让某类型遵从某协议。用协议名做类型时，不可调协议外的方法或属性</li>
<li>throw 抛出错误，throws表示可抛出错误的函数，do-catch try error，可以多catch，try? 可以返回nil抛弃错误或返回可选值</li>
<li>defer 代码块 表示函数返回前最后执行的代码，不管是否抛出错误</li>
<li>泛型函数或类型，方法、类、结构体、枚举都可用泛型。用where指定一系列需求。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">anyCommonElements</span>&lt;<span class="type">T</span>: <span class="type">Sequence</span>, <span class="type">U</span>: <span class="type">Sequence</span>&gt;(<span class="keyword">_</span> <span class="params">lhs</span>: <span class="type">T</span>, <span class="keyword">_</span> <span class="params">rhs</span>: <span class="type">U</span>) -&gt; <span class="type">Bool</span></span><br><span class="line">    <span class="keyword">where</span> <span class="type">T</span>.<span class="type">Element</span>: <span class="type">Equatable</span>, <span class="type">T</span>.<span class="type">Element</span> <span class="operator">==</span> <span class="type">U</span>.<span class="type">Element</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> lhsItem <span class="keyword">in</span> lhs &#123;</span><br><span class="line">        <span class="keyword">for</span> rhsItem <span class="keyword">in</span> rhs &#123;</span><br><span class="line">            <span class="keyword">if</span> lhsItem <span class="operator">==</span> rhsItem &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">anyCommonElements([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>])</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-1-基础部分"><a href="#1-1-基础部分" class="headerlink" title="1.1 基础部分"></a>1.1 基础部分</h3><ul>
<li>类型：Int Double Float Bool String Array Set Dictionary 元组 可选类型<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> red, green, blue: <span class="type">Double</span></span><br></pre></td></tr></table></figure></li>
<li>常量变量名，不能以数字开头</li>
<li>print(someValue, terminator:””) 输出不换行</li>
<li>多行注释可嵌套</li>
<li>同行代码，多条语句可用分号;</li>
<li>整数 UInt8 Int32，UInt8.min、UInt8.max。Int 根据平台决定是长度等于 Int32 还是 Int64，UInt也一样</li>
<li>Double 64位浮点数，15 位小数。Float 32位浮点数，只有 6 位小数</li>
<li>浮点数字面量赋值会被推断为Double</li>
<li>进制，0b二进制、0o八进制、0x十六进制</li>
<li>十进制指数，1.25e2 等于 1.25 × 10^2，1.25e-2 表示 1.25 × 10^-2</li>
<li>十六进制指数，0xFp2 表示 15 × 2^2，0xFp-2 表示 15 × 2^-2<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 额外格式增加可读性，不影响字面量值</span></span><br><span class="line"><span class="keyword">let</span> paddedDouble <span class="operator">=</span> <span class="number">000123.456</span></span><br><span class="line"><span class="keyword">let</span> oneMillion <span class="operator">=</span> <span class="number">1_000_000</span></span><br><span class="line"><span class="keyword">let</span> justOverOneMillion <span class="operator">=</span> <span class="number">1_000_000.000_000_1</span></span><br></pre></td></tr></table></figure></li>
<li>类型转换：UInt16(one)、Double(three)、Int(pi)浮点数会被截断</li>
<li>typealias 定义类型别名</li>
<li>元组，分解的时候可省略部分值，使用_<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> (justTheStatusCode, <span class="keyword">_</span>) <span class="operator">=</span> http404Error</span><br></pre></td></tr></table></figure></li>
<li>可选类型，Int(possibleNumber) 构造器，返回的Int?，可选类型声明时没赋值，会自动置nil，确定有值用强制解析 convertedNumber!，隐式解包可使代码简短，也可以解包为变量 if var，一个if语句可包含多个可选绑定或布尔条件，用逗号隔开，其中之一为假，整个表达式为假<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> firstNumber <span class="operator">=</span> <span class="type">Int</span>(<span class="string">&quot;4&quot;</span>), <span class="keyword">let</span> secondNumber <span class="operator">=</span> <span class="type">Int</span>(<span class="string">&quot;42&quot;</span>), firstNumber <span class="operator">&lt;</span> secondNumber <span class="operator">&amp;&amp;</span> secondNumber <span class="operator">&lt;</span> <span class="number">100</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>隐式解析可选类型<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> assumedString: <span class="type">String</span>! <span class="operator">=</span> <span class="string">&quot;An implicitly unwrapped optional string.&quot;</span></span><br><span class="line"><span class="keyword">let</span> implicitString: <span class="type">String</span> <span class="operator">=</span> assumedString  <span class="comment">// 不需要感叹号</span></span><br><span class="line"><span class="keyword">let</span> optionalString <span class="operator">=</span> assumedString</span><br><span class="line"><span class="comment">// optionalString 的类型是 &quot;String?&quot;，assumedString 也没有被强制解析。</span></span><br></pre></td></tr></table></figure></li>
<li>断言仅在调试用，先决条件在调试和生产环境用。断言和先决条件都可关闭的。fatalError(_:file:line:) 不会被关闭，总是会中断，早期开发阶段可用。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age <span class="operator">=</span> <span class="operator">-</span><span class="number">3</span></span><br><span class="line"><span class="built_in">assert</span>(age <span class="operator">&gt;=</span> <span class="number">0</span>, <span class="string">&quot;A person&#x27;s age cannot be less than zero&quot;</span>)</span><br><span class="line"><span class="comment">// 因为 age &lt; 0，所以断言会触发</span></span><br><span class="line"><span class="built_in">assert</span>(age <span class="operator">&gt;=</span> <span class="number">0</span>)</span><br><span class="line"><span class="built_in">assertionFailure</span>(<span class="string">&quot;A person&#x27;s age can&#x27;t be less than zero.&quot;</span>)</span><br><span class="line"><span class="built_in">precondition</span>(index <span class="operator">&gt;</span> <span class="number">0</span>, <span class="string">&quot;Index must be greater than zero.&quot;</span>)</span><br><span class="line"><span class="built_in">preconditionFailure</span>(<span class="keyword">_</span>:file:line:)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-2-基本运算符"><a href="#1-2-基本运算符" class="headerlink" title="1.2 基本运算符"></a>1.2 基本运算符</h3><ul>
<li>赋值，元组 let (x, y) &#x3D; (1, 2)</li>
<li>求余，对负数b求余，符号会被忽略，a % b 和 a % -b 结果一样</li>
<li>一元操作符，-负号，+正号</li>
<li>比较运算符，&#x3D;&#x3D; !&#x3D; &gt; &lt; &gt;&#x3D; &lt;&#x3D;，&#x3D;&#x3D;&#x3D; 和 !&#x3D;&#x3D; 比较对象引用是否相同，元组也可比较，元素类型可被比较时，如数字、字符串，布尔值不能比较。只能比较7个以内元素的元组</li>
<li>单侧区间，包含2到数据结尾或数组开头到2，包含2.<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names[<span class="number">2</span><span class="operator">...</span>] &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names[<span class="operator">...</span><span class="number">2</span>] &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names[<span class="operator">..&lt;</span><span class="number">2</span>] &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> range <span class="operator">=</span> <span class="operator">...</span><span class="number">5</span></span><br><span class="line">range.contains(<span class="operator">-</span><span class="number">1</span>)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-3-字符串和字符"><a href="#1-3-字符串和字符" class="headerlink" title="1.3 字符串和字符"></a>1.3 字符串和字符</h3><ul>
<li>多行字符串，反斜杠（\）作为续行符.多行字符串中使用 “””，需要至少一个转义符号\</li>
<li>字符串中使用引号 \“ ，使用Unicode 标量 \u{24}</li>
<li>使用 #””# 包裹起来的字符串，能打印出转义字符，#”Line 1 #nLine 2”# 可实现换行。##也可以应用在多行字符串中，或打印出非插值处理的结果</li>
<li>String() 或 “” 初始化，isEmpty 判空</li>
<li>字符串是值类型，会拷贝。for-in可遍历字符串</li>
<li>Character 字符类型<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> catCharacters: [<span class="type">Character</span>] <span class="operator">=</span> [<span class="string">&quot;C&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;t&quot;</span>, <span class="string">&quot;!&quot;</span>, <span class="string">&quot;🐱&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> catString <span class="operator">=</span> <span class="type">String</span>(catCharacters)</span><br></pre></td></tr></table></figure></li>
<li>支持 +&#x3D; 和 append 字符，多行字符串拼接的换行问题</li>
<li>Unicode 标量，可扩展的字形群集可以由多个 Unicode 标量组成<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> eAcute: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;E9&#125;</span>&quot;</span>                         <span class="comment">// é</span></span><br><span class="line"><span class="keyword">let</span> combinedEAcute: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;65&#125;</span><span class="subst">\u&#123;301&#125;</span>&quot;</span>          <span class="comment">// e 后面加上  ́</span></span><br><span class="line"><span class="comment">// eAcute 是 é, combinedEAcute 是 é</span></span><br><span class="line"><span class="keyword">let</span> enclosedEAcute: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;E9&#125;</span><span class="subst">\u&#123;20DD&#125;</span>&quot;</span></span><br><span class="line"><span class="comment">// enclosedEAcute 是 é⃝</span></span><br><span class="line"><span class="keyword">let</span> regionalIndicatorForUS: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;1F1FA&#125;</span><span class="subst">\u&#123;1F1F8&#125;</span>&quot;</span></span><br><span class="line"><span class="comment">// regionalIndicatorForUS 是 🇺🇸</span></span><br></pre></td></tr></table></figure></li>
<li>count 属性，字符数量，和 NSString 的 length 不一定相同</li>
<li>startIndex endIndex 属性，endIndex 是最后一个字符的后一个位置。空串startIndex 和 endIndex 是相等的</li>
<li>index(before:) index(after:) index(_:offsetBy:) 方法，也可用在数组、字典、集合中</li>
<li>indices 包含全部索引的范围<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> greeting.indices &#123;</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(greeting[index])</span> &quot;</span>, terminator: <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>insert(_:at:)、insert(contentsOf:at:) 插入一个字符或一段字符串  </li>
<li>remove(at:)、removeSubrange(_:) 方法删除一个字符或删除一个范围的子串，有返回值</li>
<li>上面两类方法都可用在数组、字典、集合中</li>
<li>greeting.firstIndex(of: “,”) 可将Substring转为String以便长期存储</li>
<li>字符串比较，只要字符集群表达的是同一个语义，就认为相等</li>
<li>hasPrefix(<em>:) 和 hasSuffix(</em>:) 方法</li>
<li>utf8、utf16、unicodeScalars(UInt32，访问其value得到数字，直接访问得到字符) 属性，访问字符串的3种表示方式。</li>
</ul>
<h3 id="1-4-集合类型"><a href="#1-4-集合类型" class="headerlink" title="1.4 集合类型"></a>1.4 集合类型</h3><ul>
<li>数组，可用+相加或+&#x3D;<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> threeDoubles <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0.0</span>, count: <span class="number">3</span>)</span><br><span class="line"><span class="keyword">var</span> shoppingList <span class="operator">=</span> [<span class="string">&quot;Eggs&quot;</span>, <span class="string">&quot;Milk&quot;</span>]</span><br><span class="line">shoppingList[<span class="number">4</span><span class="operator">...</span><span class="number">6</span>] <span class="operator">=</span> [<span class="string">&quot;Bananas&quot;</span>, <span class="string">&quot;Apples&quot;</span>]</span><br></pre></td></tr></table></figure></li>
<li>数组方法有 count、isEmpty、append(_:)、removeLast() 有返回值</li>
<li>遍历，有for-in 或 enumerated()方法，使用元组作为返回值<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> shoppingList.enumerated() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Item <span class="subst">\(String(index <span class="operator">+</span> <span class="number">1</span>))</span>: <span class="subst">\(value)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>可哈希化，hashValue，基本数据类型都可，String、Int、Double 和 Bool 和 无关联值的枚举成员</li>
<li>集合，没有便利化的创建方法，也可以用[]表示<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> letters <span class="operator">=</span> <span class="type">Set</span>&lt;<span class="type">Character</span>&gt;()</span><br><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; <span class="operator">=</span> [<span class="string">&quot;Rock&quot;</span>, <span class="string">&quot;Classical&quot;</span>, <span class="string">&quot;Hip hop&quot;</span>]</span><br><span class="line"><span class="keyword">var</span> favoriteGenres: <span class="type">Set</span> <span class="operator">=</span> [<span class="string">&quot;Rock&quot;</span>, <span class="string">&quot;Classical&quot;</span>, <span class="string">&quot;Hip hop&quot;</span>]</span><br></pre></td></tr></table></figure></li>
<li>集合方法 count、isEmpty insert(<em>:) remove(</em>:) 包含则返回，不包含返回nil、removeAll()、contains(_:)、sorted()返回排序的数组</li>
<li>intersection(<em>:) 交集、symmetricDifference(</em>:) 不想交集、union(<em>:) 并集、subtracting(</em>:) 不在另一集合中的值创建集合</li>
<li>&#x3D;&#x3D; 是否相等，isSubset(of:) 是否子集，isSuperset(of:) 是否父集，isStrictSubset(of:) 真子集，isStrictSuperset(of:) 真父集，isDisjoint(with:) 没交集</li>
<li>字典键遵从Hashable协议，<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> namesOfIntegers: [<span class="type">Int</span>: <span class="type">String</span>] <span class="operator">=</span> [:]</span><br><span class="line"><span class="keyword">var</span> airports: [<span class="type">String</span>: <span class="type">String</span>] <span class="operator">=</span> [<span class="string">&quot;YYZ&quot;</span>: <span class="string">&quot;Toronto Pearson&quot;</span>, <span class="string">&quot;DUB&quot;</span>: <span class="string">&quot;Dublin&quot;</span>]</span><br><span class="line"><span class="keyword">var</span> airports <span class="operator">=</span> [<span class="string">&quot;YYZ&quot;</span>: <span class="string">&quot;Toronto Pearson&quot;</span>, <span class="string">&quot;DUB&quot;</span>: <span class="string">&quot;Dublin&quot;</span>]</span><br><span class="line">airports[<span class="string">&quot;APL&quot;</span>] <span class="operator">=</span> <span class="literal">nil</span> <span class="comment">//移除键值对</span></span><br><span class="line">[<span class="type">String</span>](airports.keys) <span class="comment">//构造新数组</span></span><br></pre></td></tr></table></figure></li>
<li>字典方法 count isEmpty updateValue(_:forKey:) 会返回更新前的值，是可选值，新建值也可。下标访问也返回可选类型，removeValue(forKey:) 也返回可选值</li>
<li>字典遍历，返回元组形式。keys 或者 values 属性</li>
</ul>
<h3 id="1-5-控制流"><a href="#1-5-控制流" class="headerlink" title="1.5 控制流"></a>1.5 控制流</h3><ul>
<li>for-in区间遍历数组，也可以忽略变量名。stride(from:to:by:) 函数，设置间隔跳跃。stride(from:through:by:) 同样效果，包含结尾临界值。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">_</span> <span class="keyword">in</span> <span class="number">1</span><span class="operator">...</span>power &#123;&#125;</span><br></pre></td></tr></table></figure></li>
<li>switch case default，没有贯穿，所以不用break。匹配多值，用逗号隔开。区间匹配，元组匹配也可以是区间，下划线（_）来匹配所有可能的值，可以匹配多个分支的情况，只匹配第一个。也可以对值绑定，或用where做额外判断。复合匹配也可以用值绑定，但需要是相同的绑定值。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> somePoint <span class="operator">=</span> (<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">switch</span> somePoint &#123;</span><br><span class="line"><span class="keyword">case</span> (<span class="keyword">_</span>, <span class="number">0</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(somePoint)</span> is on the x-axis&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> (<span class="operator">-</span><span class="number">2</span><span class="operator">...</span><span class="number">2</span>, <span class="operator">-</span><span class="number">2</span><span class="operator">...</span><span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(somePoint)</span> is inside the box&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> (<span class="keyword">let</span> x, <span class="number">0</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;on the x-axis with an x value of <span class="subst">\(x)</span>&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x <span class="operator">==</span> y:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(<span class="subst">\(x)</span>, <span class="subst">\(y)</span>) is on the line x == y&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> (<span class="keyword">let</span> distance, <span class="number">0</span>), (<span class="number">0</span>, <span class="keyword">let</span> distance):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;On an axis, <span class="subst">\(distance)</span> from the origin&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li>switch 中用break 来忽略分支，fallthrough 关键字可以贯穿，连接到下一个case中代码</li>
<li>循环加标签 gameLoop: ，例如while循环中使用switch语句，可以指明break 或 continue 的是循环。</li>
<li>guard else 语句，必须转移控制以退出代码块，例如 return、break、continue、throw 以及无返回的函数，例如 fatalError()</li>
<li>检测API可用性。@avaliable(macOS 10.12, *) 指明需要更高的版本。<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">#available</span>(<span class="keyword">iOS</span> <span class="number">10</span>, <span class="keyword">macOS</span> <span class="number">10.12</span>, <span class="operator">*</span>) &#123;</span><br><span class="line">    <span class="comment">// 在 iOS 使用 iOS 10 的 API, 在 macOS 使用 macOS 10.12 的 API</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 使用先前版本的 iOS 和 macOS 的 API</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">guard</span> #avaliable(macOS <span class="number">10.12</span>, <span class="operator">*</span>) <span class="keyword">else</span>&#123;&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">#unavailable</span>(<span class="keyword">iOS</span> <span class="number">10</span>) &#123;</span><br><span class="line">	<span class="comment">//回滚代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-6-函数"><a href="#1-6-函数" class="headerlink" title="1.6 函数"></a>1.6 函数</h3><ul>
<li>无返回值的函数返回 Void ，一个空元组()</li>
<li>可选元组类型，(Int, Int)? 元组可能为nil</li>
<li>一行 return 语句可以忽略return，fatalError(“Oh no!”) 可以做隐式返回值</li>
<li>参数名需要不同，参数标签可相同，但不同更好。有标签，调用时必须使用标签</li>
<li>默认参数值<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func someFunction(parameterWithoutDefault: Int, parameterWithDefault: Int = 12) &#123;</span><br><span class="line">    // 如果你在调用时候不传第二个参数，parameterWithDefault 会值为 12 传入到函数体中。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>可变参数，函数内部转变成数组了<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func arithmeticMean(_ numbers: Double...) -&gt; Double &#123;</span><br><span class="line">  for number in numbers &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">arithmeticMean(1, 2, 3, 4, 5)</span><br></pre></td></tr></table></figure></li>
<li>输入输出参数 inout 关键字，不能有默认值。参数默认是常量，函数内不可修改。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func swapTwoInts(_ a: inout Int, _ b: inout Int) &#123;</span><br><span class="line">    let temporaryA = a</span><br><span class="line">    a = b</span><br><span class="line">    b = temporaryA</span><br><span class="line">&#125;</span><br><span class="line">var someInt = 3</span><br><span class="line">var anotherInt = 107</span><br><span class="line">swapTwoInts(&amp;someInt, &amp;anotherInt)</span><br></pre></td></tr></table></figure></li>
<li>函数类型，() -&gt; Void 没参没返回值，函数类型可以当其他类型一样用，赋值给变量，也可以应用类型推断而不必写出函数类型</li>
</ul>
<h3 id="1-7-闭包"><a href="#1-7-闭包" class="headerlink" title="1.7 闭包"></a>1.7 闭包</h3><ul>
<li>参数和返回值定义，in 分割开函数体。$0 $1 表示第一个和第二个参数。排序简写过程<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">reversedNames = names.sorted(by: &#123; (s1: String, s2: String) -&gt; Bool in return s1 &gt; s2 &#125; )</span><br><span class="line">reversedNames = names.sorted(by: &#123; s1, s2 in return s1 &gt; s2 &#125; )</span><br><span class="line">reversedNames = names.sorted(by: &#123; s1, s2 in s1 &gt; s2 &#125; )</span><br><span class="line">reversedNames = names.sorted(by: &#123; $0 &gt; $1 &#125; )</span><br><span class="line">reversedNames = names.sorted(by: &gt;)</span><br><span class="line">//尾随闭包</span><br><span class="line">reversedNames = names.sorted() &#123; $0 &gt; $1 &#125;</span><br><span class="line">//唯一参数，省略()</span><br><span class="line">reversedNames = names.sorted &#123; $0 &gt; $1 &#125;</span><br></pre></td></tr></table></figure></li>
<li>尾随闭包，最后一个参数是闭包可用。多个闭包，调用时第一个闭包的参数标签可省略。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let strings = numbers.map &#123;</span><br><span class="line">    (number) -&gt; String in</span><br><span class="line">    var output = &quot;&quot;</span><br><span class="line">    return output</span><br><span class="line">&#125;</span><br><span class="line">func loadPicture(from server: Server, completion:(Picture) -&gt; Void,</span><br><span class="line">		onFailure: () -&gt; Void) &#123;</span><br><span class="line">&#125;</span><br><span class="line">loadPicture(from: someServer)&#123;	picture in</span><br><span class="line">	someView.currentPicture = picture</span><br><span class="line">&#125; onFailure: &#123;</span><br><span class="line">	print(&quot;&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>闭包捕获变量的引用，捕获的值不改变，可能捕获的是值拷贝。函数和闭包都是引用类型，将闭包赋值给常量，引用是常量。再赋值给其他常量，两个常用将引用同一个闭包。</li>
<li>逃逸闭包，函数返回之后才执行。逃逸闭包中需要显示使用self，非逃逸闭包则不用<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var completionHandlers: [() -&gt; Void] = []</span><br><span class="line">func someFunctionWithEscapingClosure(completionHandler: @escaping () -&gt; Void) &#123;</span><br><span class="line">    completionHandlers.append(completionHandler)</span><br><span class="line">&#125;</span><br><span class="line">class SomeClass &#123;</span><br><span class="line">    var x = 10</span><br><span class="line">    func doSomething() &#123;</span><br><span class="line">        someFunctionWithEscapingClosure &#123; self.x = 100 &#125;</span><br><span class="line">        someFunctionWithNonescapingClosure &#123; x = 200 &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>自动闭包，能延迟求值，也可作为函数参数传递，@autoclosure可以将参数自动转化为闭包，过度使用不太好代码会难以理解。自动闭包也可以逃逸<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> customerProvider <span class="operator">=</span> &#123; customersInLine.remove(at: <span class="number">0</span>) &#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Now serving <span class="subst">\(customerProvider())</span>!&quot;</span>)</span><br><span class="line"><span class="comment">// 打印出“Now serving Chris!”</span></span><br><span class="line"><span class="built_in">print</span>(customersInLine.count)</span><br><span class="line"><span class="comment">// 打印出“4”</span></span><br><span class="line"><span class="comment">// customersInLine is [&quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;]</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">serve</span>(<span class="params">customer</span> <span class="params">customerProvider</span>: <span class="keyword">@autoclosure</span> () -&gt; <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Now serving <span class="subst">\(customerProvider())</span>!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">serve(customer: customersInLine.remove(at: <span class="number">0</span>))</span><br><span class="line"><span class="comment">// 打印“Now serving Ewa!”</span></span><br><span class="line"><span class="comment">// customersInLine i= [&quot;Barry&quot;, &quot;Daniella&quot;]</span></span><br><span class="line"><span class="keyword">var</span> customerProviders: [() -&gt; <span class="type">String</span>] <span class="operator">=</span> []</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">collectCustomerProviders</span>(<span class="keyword">_</span> <span class="params">customerProvider</span>: <span class="keyword">@autoclosure</span> <span class="keyword">@escaping</span> () -&gt; <span class="type">String</span>) &#123;</span><br><span class="line">    customerProviders.append(customerProvider)</span><br><span class="line">&#125;</span><br><span class="line">collectCustomerProviders(customersInLine.remove(at: <span class="number">0</span>))</span><br><span class="line">collectCustomerProviders(customersInLine.remove(at: <span class="number">0</span>))</span><br><span class="line"><span class="keyword">for</span> customerProvider <span class="keyword">in</span> customerProviders &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Now serving <span class="subst">\(customerProvider())</span>!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印“Now serving Barry!”</span></span><br><span class="line"><span class="comment">// 打印“Now serving Daniella!”</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-8-枚举"><a href="#1-8-枚举" class="headerlink" title="1.8 枚举"></a>1.8 枚举</h3><ul>
<li>枚举原始值可以是字符串、字符、整型、浮点数</li>
<li>枚举有关联值、计算属性、实例方法、构造函数，支持扩展、协议</li>
<li>枚举成员不定义默认不会被赋值数字</li>
<li>枚举类型名大写字母开头，枚举类型被再次赋值时可用点语法简写<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">directionToHead <span class="operator">=</span> .east</span><br></pre></td></tr></table></figure></li>
<li>枚举成员的遍历，遵循CaseIterable，调用 allCases 得到所有成员的集合<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Beverage</span>: <span class="title class_">CaseIterable</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> coffee, tea, juice</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> numberOfChoices <span class="operator">=</span> <span class="type">Beverage</span>.allCases.count</span><br></pre></td></tr></table></figure></li>
<li>枚举关联值，关联值可以在switch的case分支中提取出来<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Barcode</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> upc(<span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>)</span><br><span class="line">	<span class="keyword">case</span> qrCode(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> productBarcode <span class="operator">=</span> <span class="type">Barcode</span>.upc(<span class="number">8</span>, <span class="number">85909</span>, <span class="number">51226</span>, <span class="number">3</span>)</span><br><span class="line">productBarcode <span class="operator">=</span> .qrCode(<span class="string">&quot;ABCDEFGHIJKLMNOP&quot;</span>)</span><br><span class="line"><span class="keyword">switch</span> productBarcode &#123;</span><br><span class="line"><span class="keyword">case</span> .upc(<span class="keyword">let</span> numberSystem, <span class="keyword">let</span> manufacturer, <span class="keyword">let</span> product, <span class="keyword">let</span> check):</span><br><span class="line"><span class="keyword">case</span> .qrCode(<span class="keyword">let</span> productCode):</span><br><span class="line"><span class="comment">// 可以简写一个let或var</span></span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .upc(numberSystem, manufacturer, product, check):</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .qrCode(productCode):</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>原始值，类型必须相同，值必须唯一。原始值不能变，关联值可变。隐式赋值，值为整型时，默认从0开始，为第一个成员赋值，后面的依次+1.字符串隐式赋值为成员名称<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">ASCIIControlCharacter</span>: <span class="title class_">Character</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> tab <span class="operator">=</span> <span class="string">&quot;<span class="subst">\t</span>&quot;</span></span><br><span class="line">    <span class="keyword">case</span> lineFeed <span class="operator">=</span> <span class="string">&quot;<span class="subst">\n</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//用rawValue访问原始值</span></span><br><span class="line"><span class="type">Planet</span>.earth.rawValue</span><br></pre></td></tr></table></figure></li>
<li>原始值构造器，定义用了原始值就有构造器，构造器可能失败返回nil<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> possiblePlanet <span class="operator">=</span> <span class="type">Planet</span>(rawValue: <span class="number">7</span>)</span><br><span class="line"><span class="comment">// possiblePlanet 类型为 Planet? 值为 Planet.uranus</span></span><br></pre></td></tr></table></figure></li>
<li>递归枚举 indirect 关键字，在成员前加或枚举类型前加<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">indirect</span> <span class="keyword">enum</span> <span class="title class_">ArithmeticExpression</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> number(<span class="type">Int</span>)</span><br><span class="line">    <span class="keyword">case</span> addition(<span class="type">ArithmeticExpression</span>, <span class="type">ArithmeticExpression</span>)</span><br><span class="line">    <span class="keyword">case</span> multiplication(<span class="type">ArithmeticExpression</span>, <span class="type">ArithmeticExpression</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> five <span class="operator">=</span> <span class="type">ArithmeticExpression</span>.number(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">let</span> four <span class="operator">=</span> <span class="type">ArithmeticExpression</span>.number(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">let</span> sum <span class="operator">=</span> <span class="type">ArithmeticExpression</span>.addition(five, four)</span><br><span class="line"><span class="keyword">let</span> product <span class="operator">=</span> <span class="type">ArithmeticExpression</span>.multiplication(sum, <span class="type">ArithmeticExpression</span>.number(<span class="number">2</span>))</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">evaluate</span>(<span class="keyword">_</span> <span class="params">expression</span>: <span class="type">ArithmeticExpression</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> expression &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .number(value):</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .addition(left, right):</span><br><span class="line">        <span class="keyword">return</span> evaluate(left) <span class="operator">+</span> evaluate(right)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .multiplication(left, right):</span><br><span class="line">        <span class="keyword">return</span> evaluate(left) <span class="operator">*</span> evaluate(right)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(evaluate(product))</span><br><span class="line"><span class="comment">// 打印“18”</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-9-类和结构体"><a href="#1-9-类和结构体" class="headerlink" title="1.9 类和结构体"></a>1.9 类和结构体</h3><ul>
<li>类与结构体都支持 属性、方法、下标、构造器、扩展、协议。类另外支持继承、类型转换、析构、引用计数</li>
<li>类型名大写开头，属性和方法小写开头。结构体有成员逐一构造器，类没有<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vga <span class="operator">=</span> <span class="type">Resolution</span>(width: <span class="number">640</span>, height: <span class="number">480</span>)</span><br></pre></td></tr></table></figure></li>
<li>结构体和枚举是值类型，值会拷贝，基本类型，整数、浮点数、布尔值、字符串数组字典都是值类型，底层用结构体实现</li>
<li>类是引用类型，类实例用let常量引用，仍然可以改类实例的属性。引用没变，实例变了</li>
<li>恒等运算符 &#x3D;&#x3D;&#x3D; 和 !&#x3D;&#x3D; 判断是不是对同一个实例的引用</li>
</ul>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2023-09-03</span><i class="fa fa-tag"></i><a class="tag" href="/tags/图书/" title="图书">图书 </a><a class="tag" href="/tags/iOS/" title="iOS">iOS </a><a class="tag" href="/tags/Swift/" title="Swift">Swift </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://rongyu1121.github.io/2023/09/03/iOS【Swift官方文档】/,容与的成长之路,iOS【Swift官方文档】,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2023/09/05/iOS%E3%80%90Swift%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AF%87/" title="iOS【Swift官方文档】第二篇">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2020/08/20/iOS%E3%80%90iOS%E9%9D%A2%E8%AF%95%E4%B9%8B%E9%81%93%E3%80%91/" title="iOS【iOS面试之道】">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>